<p id="notice"><%= notice %></p>

<h1>Places in my neighborhood</h1>

<div class="container">
  <div class="row">
    <div class="col-xs-6 col-xs-offset-3">
        <%= render "shared/map" %>
    </div>
  </div>
</div>

<table>

  <tbody>
    <% @recos.each do |reco| %>
      <tr>

        <div class="row">
          <div class="col-md-6 col-md-offset-3" >
            <div class="well">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <%= link_to reco_path(reco) do%>
                    <div class="card-name"><%= reco.name %></div>
                    <p><%= cl_image_tag reco.photo, :class => "img-responsive img-show" %></p>
                  <% end %>
                </div>
                <div class="panel-body">
                  <div class="clearfix"></div>
                  <hr>
                  <p class="description"><%= reco.description %></p>
                  <p><%= reco.address %></p>

                  <% if params[:latitude].present? %>
                    <p>Distance: <%= (reco.distance_from([params[:latitude],params[:longitude]], :km) * 1000).round %> meters</p>
                  <% end %>
                  <div class="footer-card">
                      <%= link_to like_reco_path(reco), method: :put, class: "btn btn-default btn-sm" do %>
                        <span class="glyphicon glyphicon-chevron-up"></span>
                        <%= reco.get_upvotes.size %>
                      <% end %>
                      <%= link_to dislike_reco_path(reco), method: :put, class: "btn btn-default btn-sm" do %>
                        <span class="glyphicon glyphicon-chevron-down">
                        <%= reco.get_downvotes.size %>
                      <% end %>
                      <div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Reco', new_reco_path %>
